<div class="widget-presentation">

    <toast-message></toast-message>

    <!-- REMOTES LIST -->
    <div class="mb-3 clearfix">
        <div class="btn-group float-left mr-3"
             data-uib-dropdown
             data-dropdown-append-to-body>

            <button id="btn-sms-abbreviated-numbers-actions"
                    type="button"
                    class="btn btn-default"
                    data-uib-dropdown-toggle>
                <span class="fa fa-bars" aria-hidden="true"></span>
                <span data-translate="common_actions"></span>
                <span class="ovh-font ovh-font-small-arrow-down" aria-hidden="true"></span>
            </button>

            <ul class="dropdown-menu"
                role="menu"
                aria-labelledby="btn-sms-abbreviated-numbers-actions"
                data-uib-dropdown-menu>
                <li role="menuitem">
                    <i class="ovh-font ovh-font-add-circle mr-2" aria-hidden="true"></i>
                    <button type="button"
                            class="btn btn-link"
                            data-ng-click="$ctrl.add()"
                            data-uib-tooltip="{{ 'telephony_abbreviated_numbers_add_tooltip' | translate}}"
                            data-tooltip-placement="right"
                            data-tooltip-append-to-body="true"
                            data-ng-disabled="$ctrl.loading.init"
                            data-translate="common_add">
                    </button>
                </li>
                <li role="menuitem">
                    <i class="fa fa-download mr-2" aria-hidden="true"></i>
                    <a href="#"
                       class="btn btn-link"
                       data-ng-click="$event.preventDefault()"
                       data-ng-csv="$ctrl.abbreviatedNumbers"
                       data-csv-header="$ctrl.getCsvHeader()"
                       data-csv-column-order="$ctrl.getCsvOrder()"
                       data-ng-disabled="$ctrl.loading.init || !$ctrl.abbreviatedNumbers.length"
                       data-uib-tooltip="{{ 'telephony_abbreviated_numbers_export_tooltip' | translate}}"
                       data-tooltip-placement="right"
                       data-tooltip-append-to-body="true"
                       data-filename="{{ $ctrl.exportFilename || 'abbreviated-numbers.csv' }}">
                        <span data-translate="telephony_abbreviated_numbers_download_label"></span>
                    </a>
                </li>
                <li role="menuitem">
                    <i class="fa fa-upload mr-2" aria-hidden="true"></i>
                    <button type="button"
                            class="btn btn-link"
                            data-ng-click="$ctrl.openImport()"
                            data-uib-tooltip="{{ 'telephony_abbreviated_numbers_import_tooltip' | translate}}"
                            data-tooltip-placement="right"
                            data-tooltip-append-to-body="true"
                            data-ng-disabled="$ctrl.loading.init"
                            data-translate="telephony_abbreviated_numbers_import_label">
                    </button>
                </li>
                <li role="menuitem">
                    <i class="ovh-font ovh-font-bin mr-2" aria-hidden="true"></i>
                    <button type="button"
                            class="btn btn-link"
                            data-ng-click="$ctrl.trashAll()"
                            data-uib-tooltip="{{ 'telephony_abbreviated_numbers_trash_all_tooltip' | translate}}"
                            data-tooltip-append-to-body="true"
                            data-tooltip-placement="right"
                            data-ng-disabled="$ctrl.loading.init || !$ctrl.abbreviatedNumbers.length"
                            data-translate="telephony_abbreviated_numbers_trash_all_label">
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table"
               data-ng-class="{
                   'table-hover table-striped': $ctrl.abbreviatedNumbers.length > 1
               }">
            <thead>
                <tr>
                    <th scope="col" data-translate="telephony_abbreviated_numbers_id"></th>
                    <th scope="col" data-translate="telephony_abbreviated_numbers_number"></th>
                    <th scope="col" data-translate="telephony_abbreviated_numbers_surname"></th>
                    <th scope="col" data-translate="telephony_abbreviated_numbers_name" class="text-left" colspan="2"></th>
                </tr>
            </thead>
            <tbody data-ng-if="$ctrl.abbreviatedNumbers.length === 0">
                <tr data-ng-hide="$ctrl.loading.init">
                    <td colspan="5" data-translate="telephony_abbreviated_numbers_table_empty" class="text-left"></td>
                </tr>
            </tbody>
            <tbody>
                <tr data-ng-repeat="abbreviated in $ctrl.paginatedAbbreviatedNumbers track by abbreviated.abbreviatedNumber">
                    <td>
                        <span class="word-break"
                              data-ng-bind="abbreviated.abbreviatedNumber"></span>
                    </td>
                    <td>
                        <span class="word-break"
                              data-ng-bind="abbreviated.destinationNumber"></span>
                    </td>
                    <td>
                        <span class="word-break"
                              data-ng-bind="abbreviated.surname"></span>
                    </td>
                    <td>
                        <span class="word-break"
                              data-ng-bind="abbreviated.name"></span>
                    </td>
                    <td>
                        <oui-spinner data-ng-if="abbreviated.removing"
                                     data-size="s">
                        </oui-spinner>
                        <div class="btn-group float-right"
                             data-uib-dropdown
                             data-dropdown-append-to-body>
                            <button id="btn-sms-abbreviated-numbers-action-{{ index }}"
                                    type="button"
                                    class="btn btn-link"
                                    data-uib-dropdown-toggle>
                                <span class="ovh-font ovh-font-dots mr-2" aria-hidden="true"></span>
                                <span class="sr-only"
                                      data-translate="common_actions">
                                </span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right"
                                role="menu"
                                aria-labelledby="btn-sms-abbreviated-numbers-action-{{ index }}"
                                data-uib-dropdown-menu>
                                <li role="menuitem">
                                    <i class="ovh-font ovh-font-editer mr-2" aria-hidden="true"></i>
                                    <button type="button"
                                            class="btn btn-link"
                                            data-ng-disabled="abbreviated.updating"
                                            data-ng-click="$ctrl.update(abbreviated)"
                                            data-translate="edit">
                                    </button>
                                </li>
                                <li role="menuitem">
                                    <i class="ovh-font ovh-font-bin mr-2" aria-hidden="true"></i>
                                    <button type="button"
                                            class="btn btn-link"
                                            data-ng-disabled="abbreviated.removing"
                                            data-ng-click="$ctrl.remove(abbreviated)"
                                            data-translate="delete">
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-2"
         data-ng-show="$ctrl.abbreviatedNumbers > $ctrl.paginatedAbbreviatedNumbers"
         data-pagination-front
         data-go-to-page="false"
         data-items="$ctrl.abbreviatedNumbers"
         data-paginated-items="$ctrl.paginatedAbbreviatedNumbers"
         data-items-per-page="$ctrl.filter.perPage"
         data-page-placeholder="{{ 'common_pagination_go_to_page' | translate }}"
         data-item-per-page-placeholder="{{'common_pagination_show_by_page' |translate }}">
    </div>

</div>
